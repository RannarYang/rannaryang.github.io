var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},MainViewEvent=function(e){function t(t,a,n){return void 0===a&&(a=!1),void 0===n&&(n=!1),e.call(this,t,a,n)||this}return __extends(t,e),t}(egret.Event);MainViewEvent.SUCCESS="success",MainViewEvent.TAP_SEL_LEVEL_BUTTON="tap_sel_level_button",MainViewEvent.TAP_REPLAY_BUTTON="tap_replay_button",MainViewEvent.TAP_PROP_BUTTON="tap_prop_button",MainViewEvent.TAP_SOUND_BUTTON="tap_sound_button",MainViewEvent.SKIP_GUIDE="skip_guide",__reflect(MainViewEvent.prototype,"MainViewEvent");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,a){function n(n){t.call(a,n,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?n(i):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var GridElementType=function(){function e(e){this.typeNum=0,this.x=0,this.y=0,this.w=0,this.h=0,this.line=[],this.shapepath=[];var t=this.getTypeConfig(e);this.shapetype=t.shapetype,this.typeNum=e,this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this.line=t.line,this.shapepath=t.shapepath}return e.getInstance=function(t){return this._values[t-1]||(this._values[t-1]=new e(t)),this._values[t-1]},e.prototype.getTypeConfig=function(e){switch(e){case 1:return{shapenum:1,shapetype:"rect",x:0,y:GameData.leftPercent,w:.5,h:GameData.roadPercent,line:[{front:[0,.5],to:[.5,.5]}]};case 2:return{shapenum:1,shapetype:"rect",x:0,y:GameData.leftPercent,w:1,h:GameData.roadPercent,line:[{front:[0,.5],to:[1,.5]}]};case 3:return{shapenum:1,shapetype:"line",shapepath:[[GameData.leftPercent,0],[GameData.leftPercent,1],[GameData.leftRoadPercent,1],[GameData.leftRoadPercent,GameData.leftRoadPercent],[1,GameData.leftRoadPercent],[1,GameData.leftPercent],[GameData.leftRoadPercent,GameData.leftPercent],[GameData.leftRoadPercent,0]],line:[{front:[.5,0],to:[.5,1]},{front:[.5,.5],to:[1,.5]}]};case 4:return{shapenum:1,shapetype:"line",shapepath:[[0,GameData.leftPercent],[GameData.leftRoadPercent,GameData.leftPercent],[GameData.leftRoadPercent,1],[GameData.leftPercent,1],[GameData.leftPercent,GameData.leftRoadPercent],[0,GameData.leftRoadPercent]],line:[{front:[0,.5],to:[.5,.5]},{front:[.5,.5],to:[.5,1]}]};case 5:return{shapenum:1,shapetype:"rect",shapepath:[[0,0],[1,0],[1,1],[0,1]],line:[]}}},e}();GridElementType._values=[],__reflect(GridElementType.prototype,"GridElementType");var GameData=function(){function e(){}return e.getPropPartLine=function(t){return-1!==e._propPartLine.indexOf(t)},e.addPropPartLine=function(t){-1===this._propPartLine.indexOf(t)&&(this._propPartLine.push(t),e.storage())},e.getPropShowLine=function(t){return-1!==e._propShowLine.indexOf(t)},e.addPropShowLine=function(t){-1===this._propShowLine.indexOf(t)&&(this._propShowLine.push(t),e.storage())},e.setStarlevelGrade=function(t,a){this._starlevelGrade[t]=Math.max(this._starlevelGrade[t]||0,a);for(var n=0;n<e.levelNumObserver.length;n++)e.levelNumObserver[n].update();e.storage()},e.getStarLevelGrade=function(e){return this._starlevelGrade[e]||0},Object.defineProperty(e,"levelNum",{get:function(){return this._levelNum},set:function(t){24>=t?e._levelNum=t:e._levelEndless=!0;for(var a=0;a<e.levelNumObserver.length;a++)e.levelNumObserver[a].update();e.storage()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"levelEndless",{get:function(){return this._levelEndless},enumerable:!0,configurable:!0}),e.setLevelNumObserver=function(t){e.levelNumObserver.push(t)},e.initData=function(){this.elements=[],this.lightNum=0,this.nowLight=[],e.stageW=640,e.stageH=960},e.storage=function(){localStorage.setItem("propPartLine",JSON.stringify(e._propPartLine)),localStorage.setItem("propShowLine",JSON.stringify(e._propShowLine)),localStorage.setItem("levelNum",JSON.stringify(e._levelNum)),localStorage.setItem("levelEndless",JSON.stringify(e._levelEndless)),localStorage.setItem("starlevelGrade",JSON.stringify(e._starlevelGrade))},e.initUserData=function(){e._propPartLine=JSON.parse(localStorage.getItem("propPartLine"))||[],e._propPartLine=e._propPartLine.filter(function(e){return 24>=e}),e._propShowLine=JSON.parse(localStorage.getItem("propShowLine"))||[],e._propShowLine=e._propShowLine.filter(function(e){return 24>=e}),e._levelNum=JSON.parse(localStorage.getItem("levelNum"))||1,e._levelEndless=JSON.parse(localStorage.getItem("levelEndless"))||!1,e._starlevelGrade=JSON.parse(localStorage.getItem("starlevelGrade"))||[]},e}();GameData._propPartLine=[],GameData._propShowLine=[],GameData._starlevelGrade=[],GameData._levelNum=1,GameData._levelEndless=!1,GameData.levelPageNum=2,GameData.nowLevel=0,GameData.line=0,GameData.col=0,GameData.nowLight=[],GameData.powerState={x:0,y:0},GameData.sureGridArr=[],GameData.soundOn=!0,GameData.lightSize={bitmapX:0,bitmapY:0,bitmapScale:1},GameData.powerSize={bitmapX:0,bitmapY:0,bitmapScale:1},GameData.stageW=0,GameData.stageH=0,GameData.levelNumObserver=[],__reflect(GameData.prototype,"GameData");var LevelGameDataParse=function(){function e(){}return e.parseLevelGameData=function(e){GameData.line=e.line,GameData.col=e.col;var t=e.square;GameData.elements=[];for(var a=0;a<GameData.line;a++){GameData.elements[a]=[];for(var n=0;n<GameData.col;n++){var i=t[a][n],r=e.trueRot&&e.trueRot.length?e.trueRot[a*GameData.col+n]:i.trueRot;GameData.elements[a][n]=new GridElement(a,n,i.type,i.kind,i.init_rot,r),"light"===i.kind?GameData.lightNum++:"power"===i.kind&&(GameData.powerState.x=a,GameData.powerState.y=n)}}GameData.brickwidth=Math.floor(GameData.stageW/(GameData.col+.5)),GameData.roadwidth=.2*GameData.brickwidth,GameData.leftwidth=GameData.leftPercent*GameData.brickwidth,GameData.lightSize={bitmapX:.17*GameData.brickwidth,bitmapY:.02*GameData.brickwidth,bitmapScale:parseFloat((.64*GameData.brickwidth/150).toFixed(2))},GameData.powerSize={bitmapX:.15*GameData.brickwidth,bitmapY:.22*GameData.brickwidth,bitmapScale:parseFloat((.7*GameData.brickwidth/160).toFixed(2))}},e}();__reflect(LevelGameDataParse.prototype,"LevelGameDataParse");var LevelLogic=function(){function e(){}return e.getRandomLevel=function(t){void 0===t&&(t={line:8,col:7}),this.spanningTree=[],this.spanningNode=[];var a=Math.ceil(Math.random()*t.line*t.col),n=Util.num2pos(a,t),i=e.createSpanningTree(t,a,n),r={line:t.line,col:t.col,square:i};return r},e.createSpanningTree=function(t,a,n){e.getCanAddChild(t,a,n,1,3,0),this.makeLink(t);for(var i=[],r=t.line,o=t.col,s=0;r>s;s++){i[s]=[];for(var l=0;o>l;l++){i[s][l]={kind:"wine",type:"5",exit:[0,0,0,0],init_rot:90*Math.floor(4*Math.random())};var h=this.pos2num({line:s,col:l},t),p=this.spanningTree[h];if(p){e.num2exit(h,p.parent,t,i[s][l]);for(var u=0,d=p.child.length;d>u;u++)this.num2exit(h,p.child[u],t,i[s][l]);h==a&&(i[s][l].kind="power"),0==p.child.length&&(i[s][l].kind="light"),i[s][l].type=this.exit2type(i[s][l].exit),i[s][l].trueRot=this.exit2rot(i[s][l].exit,i[s][l].type)}else i[s][l].type=Math.ceil(4*Math.random())+1,i[s][l].exit=Util.getExitByTypeAndRot(i[s][l].type,i[s][l].rot)}}return i},e.makeLink=function(e){for(var t=e.line*e.col,a=[],n=1;t>=n;n++)a.push(n);for(var i=this.minus(a,this.spanningNode),r=i.length,n=0;r>n;n++){var o=i[n],s=this.getArroundGrid(o,e);if(s=this.intersection(s,this.spanningNode),s.length){var l=Math.floor(Math.random()*s.length),h=s[l],p=this.spanningTree[h],u=p.child.length;2>u&&(p.child.push(o),this.spanningTree[o]={parent:h,child:[]},this.spanningNode.push(o))}}this.spanningNode.length<t-3&&this.makeLink(e)},e.getCanAddChild=function(e,t,a,n,i,r){if(this.isInTree(t)&&this.isInGrid(t,e)){var o=this.getArroundGrid(t,e);o=this.minus(o,this.spanningNode);var s=Math.floor(n+Math.random()*Math.min(o.length,i)),l=Util.getDifferentNum(null,null,s,o),h={parent:r,child:l};this.spanningNode.push(t),this.spanningTree[t]=h;for(var p=l.length,u=0;p>u;u++){var d=Util.num2pos(l[u],e);this.getCanAddChild(e,l[u],d,0,3,t)}}},e.exit2rot=function(e,t){var a;switch(t){case 1:case 2:a=90*e.indexOf(!0);break;case 3:a=90*e.indexOf(0);break;case 4:var n=e.indexOf(!0);if(0!==n)a=90*(n+1);else{var i=e.indexOf(0);a=1==i?0:90}}return a},e.getArroundGrid=function(e,t){var a=[],n=Util.num2pos(e,t),i=n.line,r=n.col;return this.isInGrid(e-1,t)&&r>0&&a.push(e-1),this.isInGrid(e+1,t)&&r<t.col-1&&a.push(e+1),this.isInGrid(e+t.col,t)&&i<t.line-1&&a.push(e+t.col),this.isInGrid(e-t.col,t)&&i>0&&a.push(e-t.col),a},e.isInGrid=function(e,t){var a=t.line*t.col;return e>0&&a>=e?!0:!1},e.isInTree=function(e){return this.spanningNode.indexOf(e)},e.pos2num=function(e,t){return e.line*t.col+e.col+1},e.num2exit=function(e,t,a,n){switch(e-t){case 1:n.exit[0]=!0;break;case-1:n.exit[2]=!0;break;case a.col:n.exit[1]=!0;break;case-a.col:n.exit[3]=!0}},e.exit2type=function(e){var t=0;return e.forEach(function(e,a,n){1==e&&t++}),1==t||3==t?t:e[0]&&e[2]||e[1]&&e[3]?2:4},e.minus=function(e,t){for(var a=new Array,n=e.length,i=t.length,r=0;n>r;r++){for(var o=!0,s=0;i>s;s++)e[r]==t[s]&&(o=!1);o&&a.push(e[r])}return a},e.intersection=function(e,t){for(var a=new Array,n=e.length,i=t.length,r=0;n>r;r++)for(var o=0;i>o;o++)if(e[r]==t[o]){a.push(e[r]);break}return a},e}();LevelLogic.spanningTree=[],LevelLogic.spanningNode=[],__reflect(LevelLogic.prototype,"LevelLogic");var LinkLogic=function(){function e(){}return e.link=function(){GameData.nowLight=[],this._linkPoint=[],this._nowLightNum=0;for(var t=GameData.powerState.x,a=GameData.powerState.y,n=GameData.elements,i=GameData.line,r=GameData.col,o=0;i>o;o++)for(var s=0;r>s;s++)n[o][s].depth=void 0;return n[t][a].depth=0,GameData.nowLight.push(GameData.elements[t][a]),e.setLink(t,a,0),this._nowLightNum===GameData.lightNum?!0:!1},e.setLink=function(t,a,n){var i=GameData.col,r=GameData.line,o=GameData.elements,s=o[t][a],l=o[t][a].exit;if(!(s.depth&&s.depth>=n||s.depth)){s.depth=n;for(var h=0,p=l.length;p>h;h++)if(1==l[h])switch(h){case 0:if(a>=1&&i-1>=a){var u=o[t][a-1];1==u.exit[2]&&(e.setLink(t,a-1,n-1),e.setLinkData(t,a-1))}break;case 1:if(t>=1&&r-1>=t){var d=o[t-1][a];1==d.exit[3]&&(e.setLink(t-1,a,n-1),e.setLinkData(t-1,a))}break;case 2:if(i-1>=a+1&&a>=0){var c=o[t][a+1];1==c.exit[0]&&(e.setLink(t,a+1,n-1),e.setLinkData(t,a+1))}break;case 3:if(r-1>=t+1&&t>=0){var m=o[t+1][a];1==m.exit[1]&&(e.setLink(t+1,a,n-1),e.setLinkData(t+1,a))}}}},e.setLinkData=function(e,t){var a=GameData.elements[e][t];-1===this._linkPoint.indexOf(e+""+t)&&(this._linkPoint.push(e+""+t),GameData.nowLight.push(a),"light"===a.kind&&this._nowLightNum++)},e}();__reflect(LinkLogic.prototype,"LinkLogic");var PropLogic=function(){function e(){}return e.usePartGridProp=function(){for(var e=[],t=GameData.col*GameData.line,a=Math.ceil(t/3),n=Util.getDifferentNum(1,t,a),i=0;i<n.length;i++){var r=Util.num2pos(n[i],{line:GameData.line,col:GameData.col});e.push(r);var o=GameData.elements[r.line][r.col];o.rot=o.des_rot}GameData.sureGridArr=e},e}();__reflect(PropLogic.prototype,"PropLogic");var RankingStandardGameDataParse=function(){function e(){}return e.parseRankingStandardGameData=function(e){GameData.starConfig=e.starConfig},e}();__reflect(RankingStandardGameDataParse.prototype,"RankingStandardGameDataParse");var Util=function(){function e(){}return e.getDifferentNum=function(e,t,a,n){void 0===n&&(n=null);var i=new Array;if(n)for(var r=n.length,o=0;r>o;o++)i[o]=n[o];else for(var o=e;t>=o;o++)i.push(o);for(var s=[],l=0;a>l&&i.length>0;l++){var h=Math.floor(Math.random()*i.length);s[l]=i[h],i.splice(h,1)}return s},e.num2pos=function(e,t){var a=t.col;t.line;return{line:Math.floor((e-1)/a),col:(e-1)%t.col}},e.getExitByTypeAndRot=function(e,t){var a,n=[];switch("type"+e){case"type1":n=[!1,!1,!1,!1],a=t/90%4,n[a]=!0;break;case"type2":n=[!1,!1,!1,!1],a=t/90%2,n=1==a?[!1,!0,!1,!0]:[!0,!1,!0,!1];break;case"type3":n=[!0,!0,!0,!0],a=t/90%4,n[a]=!1;break;case"type4":n=[!1,!1,!1,!1],a=t/90%4,n[a]=!0,n[(a-1+4)%4]=!0;break;case"type5":n=[!1,!1,!1,!1]}return n},e}();__reflect(Util.prototype,"Util");var ViewConfigGameDataParse=function(){function e(){}return e.parseViewConfigGameData=function(e){GameData.frameColor=parseInt(e.frameColor,16),GameData.squareFillColor=parseInt(e.squareFillColor,16),GameData.squareUnableFillColor=parseInt(e.squareUnableFillColor,16),GameData.squareStroColor=parseInt(e.squareStroColor,16),GameData.roadLinkColor=parseInt(e.roadLinkColor,16),GameData.roadUnlinkColor=parseInt(e.roadUnlinkColor,16),GameData.tipColor=parseInt(e.tipColor,16),GameData.unlockFillColor=parseInt(e.unlockFillColor,16),GameData.roadPercent=e.roadPercent,GameData.leftPercent=e.leftPercent,GameData.leftRoadPercent=e.leftRoadPercent},e}();__reflect(ViewConfigGameDataParse.prototype,"ViewConfigGameDataParse");var CongradulationViewEvent=function(e){function t(t,a,n){return void 0===a&&(a=!1),void 0===n&&(n=!1),e.call(this,t,a,n)||this}return __extends(t,e),t}(egret.Event);CongradulationViewEvent.TAP_SURE_BUTTON="tap_sure_button",__reflect(CongradulationViewEvent.prototype,"CongradulationViewEvent");var GridElementViewManageEvent=function(e){function t(t,a,n){void 0===a&&(a=!1),void 0===n&&(n=!1);var i=e.call(this,t,a,n)||this;return i.xIndex=0,i.yIndex=0,i}return __extends(t,e),t}(egret.Event);GridElementViewManageEvent.TAP_GRIDELEMENT="tap_gridelement",GridElementViewManageEvent.ROTATE_END="rotate_end",__reflect(GridElementViewManageEvent.prototype,"GridElementViewManageEvent");var LevelViewEvent=function(e){function t(t,a,n){void 0===a&&(a=!1),void 0===n&&(n=!1);var i=e.call(this,t,a,n)||this;return i.levelNum=0,i}return __extends(t,e),t}(egret.Event);LevelViewEvent.TAP_SEL_LEVEL_BUTTON="tap_sel_level_button",LevelViewEvent.TAP_ENDLESS_BUTTON="tap_endless_button",__reflect(LevelViewEvent.prototype,"LevelViewEvent");var GridElement=function(){function e(e,t,a,n,i,r){this.kind="light",this.des_rot=0,this.xIndex=0,this.yIndex=0,this._rot=0,this.exit=[],this.xIndex=e,this.yIndex=t,this.type=GridElementType.getInstance(a),this.kind=n,this.rot=i,this.des_rot=r}return Object.defineProperty(e.prototype,"rot",{get:function(){return this._rot},set:function(e){this._rot=e,this.exit=Util.getExitByTypeAndRot(this.type.typeNum,this.rot)},enumerable:!0,configurable:!0}),e}();__reflect(GridElement.prototype,"GridElement");var PropViewEvent=function(e){function t(t,a,n){return void 0===a&&(a=!1),void 0===n&&(n=!1),e.call(this,t,a,n)||this}return __extends(t,e),t}(egret.Event);PropViewEvent.TAP_PART_LINE_BUTTON="tap_part_line_button",PropViewEvent.TAP_SHOW_LINE_BUTTON="tap_show_line_button",__reflect(PropViewEvent.prototype,"PropViewEvent");var SuccessViewEvent=function(e){function t(t,a,n){return void 0===a&&(a=!1),void 0===n&&(n=!1),e.call(this,t,a,n)||this}return __extends(t,e),t}(egret.Event);SuccessViewEvent.TAP_NEXT_LEVEL_BUTTON="tap_next_level_button",__reflect(SuccessViewEvent.prototype,"SuccessViewEvent");var GameLogic=function(){function e(e){this._gameStage=e,this.init()}return e.prototype.init=function(){GameData.initData(),GameData.initUserData();var e=RES.getRes("viewConfig_json");ViewConfigGameDataParse.parseViewConfigGameData(e);this._levelConfigData=RES.getRes("levelConfig_json");this._presentLevelConfig=this._levelConfigData.level_def[0],LevelGameDataParse.parseLevelGameData(this._presentLevelConfig);var t=RES.getRes("rankingStandardConfig_json");RankingStandardGameDataParse.parseRankingStandardGameData(t);var a=this._mainView=new MainView;this._gameStage.addChild(a);var n=this._levelView=new LevelView(1);GameData.setLevelNumObserver(n),this._gameStage.addChild(n);var i=this._successView=new SuccessView;this._gameStage.addChild(i);var r=this._propView=new PropView;this._gameStage.addChild(r);var o=this._congradulationView=new CongradulationView;this._gameStage.addChild(o),LinkLogic.link(),this.useProp(),this._sound=RES.getRes("win_mp3"),this._mainView.dispatcher.addEventListener(MainViewEvent.SKIP_GUIDE,this.skip_guide,this),this._mainView.dispatcher.addEventListener(MainViewEvent.SUCCESS,this.success,this),this._mainView.dispatcher.addEventListener(MainViewEvent.TAP_SEL_LEVEL_BUTTON,this.tap_selLevelButton,this),this._mainView.dispatcher.addEventListener(MainViewEvent.TAP_REPLAY_BUTTON,this.tap_replayButton,this),this._mainView.dispatcher.addEventListener(MainViewEvent.TAP_PROP_BUTTON,this.tap_propButton,this),this._mainView.dispatcher.addEventListener(MainViewEvent.TAP_SOUND_BUTTON,this.tap_soundButton,this),this._propView.dispatcher.addEventListener(PropViewEvent.TAP_PART_LINE_BUTTON,this.tap_partLineButton,this),this._propView.dispatcher.addEventListener(PropViewEvent.TAP_SHOW_LINE_BUTTON,this.tap_showLineButton,this),this._levelView.dispatcher.addEventListener(LevelViewEvent.TAP_SEL_LEVEL_BUTTON,this.tap_selLevelButtonInLevelView,this),this._levelView.dispatcher.addEventListener(LevelViewEvent.TAP_ENDLESS_BUTTON,this.tap_endlessButton,this),this._successView.dispatcher.addEventListener(SuccessViewEvent.TAP_NEXT_LEVEL_BUTTON,this.tap_nextLevelBtn,this),this._congradulationView.dispatcher.addEventListener(CongradulationViewEvent.TAP_SURE_BUTTON,this.tap_sureBtn,this)},e.prototype.skip_guide=function(){var e=this;egret.setTimeout(function(){e._levelView.show(),e._mainView.currentState="game",e._mainView.enabled=!0},this,500)},e.prototype.success=function(e){GameData.soundOn&&this._sound.play(0,1);var t=Math.max(GameData.getStarLevelGrade(GameData.nowLevel),e.starNum);GameData.setStarlevelGrade(GameData.nowLevel,t),GameData.levelNum=Math.max(GameData.nowLevel+1,GameData.levelNum),this._successView.show(t)},e.prototype.tap_selLevelButtonInLevelView=function(e){GameData.nowLevel=e.levelNum,this.playLevel()},e.prototype.tap_nextLevelBtn=function(){GameData.nowLevel=GameData.nowLevel+1,GameData.levelNum=Math.max(GameData.nowLevel,GameData.levelNum),25!==GameData.nowLevel?this.playLevel():this._congradulationView.show()},e.prototype.playLevel=function(){var e=GameData.nowLevel;GameData.initData(),24>=e?this._presentLevelConfig=this._levelConfigData.level_def[e]:this._presentLevelConfig=LevelLogic.getRandomLevel(),LevelGameDataParse.parseLevelGameData(this._presentLevelConfig),this._mainView.newGridElementView(),this._mainView.enabled=!0,this.useProp()},e.prototype.useProp=function(){GameData.getPropPartLine(GameData.nowLevel)&&(PropLogic.usePartGridProp(),this._mainView.usePartLineProp()),GameData.getPropShowLine(GameData.nowLevel)&&this._mainView.useShowLineProp()},e.prototype.tap_selLevelButton=function(){this._levelView.show()},e.prototype.tap_replayButton=function(){GameData.initData(),LevelGameDataParse.parseLevelGameData(this._presentLevelConfig),this._mainView.resetGridElementView(),this.useProp()},e.prototype.tap_propButton=function(){this._propView.show()},e.prototype.tap_soundButton=function(e){GameData.soundOn=e.soundOn},e.prototype.tap_partLineButton=function(){GameData.getPropPartLine(GameData.nowLevel)||(GameData.addPropPartLine(GameData.nowLevel),PropLogic.usePartGridProp(),this._mainView.usePartLineProp())},e.prototype.tap_showLineButton=function(){GameData.getPropShowLine(GameData.nowLevel)||GameData.addPropShowLine(GameData.nowLevel),this._mainView.useShowLineProp()},e.prototype.tap_endlessButton=function(){GameData.nowLevel=25,this.playLevel()},e.prototype.tap_sureBtn=function(){this.playLevel()},e}();__reflect(GameLogic.prototype,"GameLogic");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){var e=new egret.Bitmap;e.texture=RES.getRes("loading_bg_jpg"),e.x=0,e.y=0,e.width=640,e.height=960,this.addChild(e),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=500,this.textField.width=640,this.textField.height=100,this.textField.textAlign="center",this.textField.textColor=2270164,this.textField.size=44},t.prototype.load=function(e,t){t&&(this._loadCompleteHandler=t),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},t.prototype.onResourceLoadComplete=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this._loadCompleteHandler&&(this._loadCompleteHandler(),this._loadCompleteHandler=null)},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"game"==e.groupName&&(this.textField.text="Loading..."+e.itemsLoaded+"/"+e.itemsTotal)},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){if("preload"==e.groupName){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView);var t=this;this.loadingView.load("game",function(){t.isResourceLoadEnd=!0,t.createScene()}),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)}},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName},t.prototype.startCreateScene=function(){var e=new eui.Component,t=new eui.Rect(640,960,3328510);e.addChild(t),this.addChild(e),new GameLogic(e),this.stage.removeChild(this.loadingView)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,a,n){function i(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),a.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var CongradulationView=function(e){function t(){var t=e.call(this)||this;return t.skinName=userSkins.CongradulationViewSkin,t.init(),t}return __extends(t,e),t.prototype.partAdded=function(e,t){t===this.sure_btn&&this.sure_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_sureBtn,this)},t.prototype.init=function(){this.hide(),this._dispatcher=new egret.EventDispatcher},Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!0,configurable:!0}),t.prototype.hide=function(){this.visible=!1},t.prototype.tap_sureBtn=function(){this.hide();var e=new CongradulationViewEvent(CongradulationViewEvent.TAP_SURE_BUTTON);this._dispatcher.dispatchEvent(e)},t.prototype.show=function(){this.visible=!0},t}(eui.Component);__reflect(CongradulationView.prototype,"CongradulationView");var GridElementView=function(e){function t(t,a){var n=e.call(this)||this;return n.xIndex=t,n.yIndex=a,n.init(),n}return __extends(t,e),t.prototype.init=function(){this.touchEnabled=!0;var e=this.element,t=this._squareShape=new egret.Shape;t.x=t.y=0,this.addChild(t),this.changeSquareShape(!0);var a=this._roadShape=new egret.Shape;a.x=a.y=a.anchorOffsetX=a.anchorOffsetY=.5*GameData.brickwidth,this.addChild(a),this.changeRoadShape(!1),a.rotation=e.rot;var n=this._tipsLineShape=new egret.Shape;if(n.x=n.y=n.anchorOffsetX=n.anchorOffsetY=.5*GameData.brickwidth,this.addChild(n),this._elementImg=new egret.Bitmap,"wine"!==e.kind){var i=e.kind+"Size";this._elementImg.touchEnabled=!1,this._elementImg.texture="light"===e.kind?RES.getRes("un"+e.kind+"_png"):RES.getRes(e.kind+"_png"),this._elementImg.x=GameData[i].bitmapX,this._elementImg.y=GameData[i].bitmapY,this._elementImg.scaleX=GameData[i].bitmapScale,this._elementImg.scaleY=GameData[i].bitmapScale,this.addChild(this._elementImg)}},t.prototype.setLight=function(){"light"===this.element.kind&&(this._elementImg.texture=RES.getRes("light_png")),this.changeRoadShape(!0)},t.prototype.setUnlight=function(){"light"===this.element.kind&&(this._elementImg.texture=RES.getRes("unlight_png")),this.changeRoadShape(!1)},Object.defineProperty(t.prototype,"element",{get:function(){return GameData.elements[this.xIndex][this.yIndex]},enumerable:!0,configurable:!0}),t.prototype.addTipsLine=function(){var e=this._tipsLineShape;e.graphics.clear();var t=this.element;e.graphics.lineStyle(2,GameData.tipColor);for(var a=t.type.line,n=0;n<a.length;n++)e.graphics.lineTo(a[n].front[0]*GameData.brickwidth,a[n].front[1]*GameData.brickwidth),e.graphics.lineTo(a[n].to[0]*GameData.brickwidth,a[n].to[1]*GameData.brickwidth);e.rotation=this.element.des_rot},t.prototype.rotate=function(e){var t=this;void 0===e&&(e=function(){}),this.touchEnabled=!1;var a=this.element.rot;270===a&&(a=-90,this._roadShape.rotation=-180);var n=egret.Tween.get(this._roadShape);n.to({rotation:a},150).call(function(){egret.Tween.removeTweens(t._roadShape),e(),t.touchEnabled=!0})},t.prototype.rotateToDes=function(e){void 0===e&&(e=function(){}),this.touchEnabled=!1,this.changeSquareShape(!1);var t=egret.Tween.get(this._roadShape);t.to({rotation:this.element.des_rot},200).call(e)},t.prototype.reset=function(){this.touchEnabled=!0,this.changeSquareShape(!0),this._roadShape.rotation=this.element.rot,this.setUnlight()},t.prototype.changeRoadShape=function(e){var t=this.element,a=this._roadShape,n=e?GameData.roadLinkColor:GameData.roadUnlinkColor;a.graphics.clear(),a.graphics.beginFill(n);var i=t.type.shapetype;switch(i){case"line":for(var r=t.type.shapepath,o=0,s=r.length;s>o;o++){var l=r[o];a.graphics.lineTo(l[0]*GameData.brickwidth,l[1]*GameData.brickwidth)}a.graphics.endFill();break;case"rect":a.graphics.drawRect(t.type.x*GameData.brickwidth,t.type.y*GameData.brickwidth,t.type.w*GameData.brickwidth,t.type.h*GameData.brickwidth),a.graphics.endFill()}},t.prototype.changeSquareShape=function(e){var t=this._squareShape,a=e?GameData.squareFillColor:12240858;t.graphics.clear(),t.graphics.beginFill(a,1),t.graphics.lineStyle(4,GameData.squareStroColor,1),t.graphics.drawRect(0,0,GameData.brickwidth,GameData.brickwidth),t.graphics.endFill()},t}(egret.Sprite);__reflect(GridElementView.prototype,"GridElementView");var GridElementViewManage=function(e){function t(t){var a=e.call(this)||this;return a._elementViews=[],a._layer=t,a.init(),a}return __extends(t,e),t.prototype.getElementViews=function(e,t){return this._elementViews[e][t]},t.prototype.usePartLineProp=function(){for(var e=0;e<GameData.sureGridArr.length;e++){var t=GameData.sureGridArr[e],a=t.line,n=t.col;this._elementViews[a][n]}var i=JSON.parse(JSON.stringify(GameData.sureGridArr));this.rotateElementToDes(i)},t.prototype.useShowLineProp=function(){for(var e=this._elementViews,t=0;t<e.length;t++)for(var a=0;a<e[t].length;a++)e[t][a].addTipsLine()},t.prototype.rotateElementToDes=function(e){var t=this,a=e.pop();if(a){var n=a.line,i=a.col,r=this._elementViews[n][i];r.rotateToDes(function(){t.rotateElementToDes(e)})}},t.prototype.init=function(){var e=GameData.line,t=GameData.col;this._elementViews=[];for(var a=0;e>a;a++){this._elementViews[a]=[];for(var n=0;t>n;n++)this.addElementView(a,n)}var i=new egret.Shape;i.graphics.lineStyle(4,GameData.frameColor),i.graphics.drawRect(1,0,GameData.col*GameData.brickwidth-2,GameData.line*GameData.brickwidth),i.graphics.endFill(),this._layer.addChild(i),this.lightBulb()},t.prototype.reset=function(){for(var e=0;e<GameData.line;e++)for(var t=0;t<GameData.col;t++)this._elementViews[e][t].reset()},t.prototype.lightBulb=function(){for(var e=0;e<GameData.nowLight.length;e++){var t=GameData.nowLight[e],a=this.getElementViews(t.xIndex,t.yIndex);a.setLight()}},t.prototype.unlightBulb=function(){for(var e=0;e<GameData.nowLight.length;e++){var t=GameData.nowLight[e],a=this.getElementViews(t.xIndex,t.yIndex);a.setUnlight()}},t.prototype.addElementView=function(e,t){var a=new GridElementView(e,t);this._elementViews[e][t]=a,a.x=t*GameData.brickwidth,a.y=e*GameData.brickwidth,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touch_tap,this),this._layer.addChild(a)},t.prototype.touch_tap=function(e){var t=this,a=e.currentTarget,n=new GridElementViewManageEvent(GridElementViewManageEvent.TAP_GRIDELEMENT);n.xIndex=a.element.xIndex,n.yIndex=a.element.yIndex,this.dispatchEvent(n),a.rotate(function(){var e=new GridElementViewManageEvent(GridElementViewManageEvent.ROTATE_END);t.dispatchEvent(e)})},t}(egret.EventDispatcher);__reflect(GridElementViewManage.prototype,"GridElementViewManage");var LevelSelButtonView=function(e){function t(t){var a=e.call(this)||this;return a._levelNum=0,a._levelNum=t,a.skinName=userSkins.LevelSelButtonSkin,a}return __extends(t,e),t.prototype.partAdded=function(e,t){t===this.numGroup&&this.setLevelText()},t.prototype.setStar=function(e){this.starImage.texture=RES.getRes("star"+e+"_s_png")},t.prototype.setLevelText=function(){var e=this._levelNum<10?"0"+this._levelNum:""+this.levelNum;this.num0.texture=RES.getRes("num"+e[0]+"_png"),this.num1.texture=RES.getRes("num"+e[1]+"_png")},Object.defineProperty(t.prototype,"levelNum",{get:function(){return this._levelNum},enumerable:!0,configurable:!0}),t}(eui.Button);__reflect(LevelSelButtonView.prototype,"LevelSelButtonView");var LevelView=function(e){function t(t){var a=e.call(this)||this;return a._allSelButton=[],a._pageNum=t,a.skinName=userSkins.LevelScreenSkin,a.init(),a}return __extends(t,e),Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!0,configurable:!0}),t.prototype.partAdded=function(e,t){t==this.levelBtnGroup1?this.addLevelSelBtns(1,3,4):t==this.levelBtnGroup2?this.addLevelSelBtns(2,3,4):t===this.prevButton?(1!==this._pageNum?this.prevButton.enabled=!0:this.prevButton.enabled=!1,this.prevButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_prevButton,this)):t===this.nextButton?(this._pageNum===GameData.levelPageNum?this.nextButton.enabled=!1:this.nextButton.enabled=!0,this.nextButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_nextButton,this)):t===this.endlessButton&&(this.endlessButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_endlessButton,this),GameData.levelEndless&&(this.endlessButton.enabled=!0))
},t.prototype.update=function(){this.setAllLevelSelButtonStatus()},t.prototype.init=function(){this._dispatcher=new egret.EventDispatcher,this.hide()},t.prototype.addLevelSelBtns=function(e,t,a){for(var n=0;t>n;n++)for(var i=0;a>i;i++){var r=12*(e-1)+(4*n+i+1),o=new LevelSelButtonView(r);o.enabled=r<=GameData.levelNum?!0:!1,o.setStar(GameData.getStarLevelGrade(r)),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_selLevelBtn,this),this["levelBtnGroup"+e].addChild(o),this._allSelButton[r-1]=o}},t.prototype.setAllLevelSelButtonStatus=function(){for(var e=(this._allSelButton.length,0);e<GameData.levelNum;e++)this._allSelButton[e].enabled=!0,this._allSelButton[e].setStar(GameData.getStarLevelGrade(e+1));GameData.levelEndless===!0&&(this.endlessButton.enabled=!0)},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.tap_selLevelBtn=function(e){this.hide();var t=new LevelViewEvent(LevelViewEvent.TAP_SEL_LEVEL_BUTTON);t.levelNum=e.currentTarget.levelNum,this._dispatcher.dispatchEvent(t)},t.prototype.tap_prevButton=function(){this._pageNum--,1!==this._pageNum?this.prevButton.enabled=!0:this.prevButton.enabled=!1,this.nextButton.enabled=!0,this.slideRight.play(1)},t.prototype.tap_nextButton=function(){this._pageNum++,this._pageNum===GameData.levelPageNum?this.nextButton.enabled=!1:this.nextButton.enabled=!0,this.prevButton.enabled=!0,this.slideLeft.play(1)},t.prototype.tap_endlessButton=function(){this.hide();var e=new LevelViewEvent(LevelViewEvent.TAP_ENDLESS_BUTTON);this._dispatcher.dispatchEvent(e)},t}(eui.Component);__reflect(LevelView.prototype,"LevelView");var MainView=function(e){function t(){var t=e.call(this)||this;return t.skinName=userSkins.MainViewSkin,t.currentState="guide",t.initGuide(),t}return __extends(t,e),t.prototype.partAdded=function(e,t){t==this.gameViewGroup?this.init():t===this.selLevelButton?this.selLevelButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_selLevelButton,this):t===this.replayButton?this.replayButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_replayButton,this):t===this.propButton?this.propButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_propButton,this):t===this.soundButton?this.soundButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_soundButton,this):t===this.levelNumGroup?this.setLevelNumImage():t===this.gameButtonGroup&&(this.gameButtonGroup.touchEnabled=!1,this.gameButtonGroup.y=GameData.brickwidth*GameData.line+170)},Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!0,configurable:!0}),t.prototype.usePartLineProp=function(){this._gevm.usePartLineProp(),this.reLink()},t.prototype.useShowLineProp=function(){this._gevm.useShowLineProp()},t.prototype.resetGridElementView=function(){this._startTime=new Date,this._gevm.reset(),this.reLink()},t.prototype.newGridElementView=function(){this._startTime=new Date,this.setLevelNumImage(),this.initGameViewGroup(),this.gameButtonGroup.y=GameData.brickwidth*GameData.line+170,this.reLink()},t.prototype.initGuide=function(){var e=this.guideElement=new eui.Component,t=new egret.Shape;t.graphics.lineStyle(12,GameData.roadLinkColor),t.graphics.drawRect(0,0,GameData.brickwidth,GameData.brickwidth),t.graphics.endFill(),t.x=63,t.y=215,e.addChild(t);var a=RES.getRes("hand_ani_json"),n=RES.getRes("hand_ani_png"),i=new egret.MovieClipDataFactory(a,n),r=new egret.MovieClip(i.generateMovieClipData("hand_ani"));r.x=80,r.y=250,r.scaleX=1.6,r.scaleY=1.6,e.addChild(r),r.play(-1),e.touchEnabled=!1,this.addChild(e)},t.prototype.init=function(){this._dispatcher=new egret.EventDispatcher,this.initGameViewGroup()},t.prototype.initGameViewGroup=function(){var e=(GameData.line,GameData.col);this._gameViewContainer&&this.gameViewGroup.removeChild(this._gameViewContainer);var t=this._gameViewContainer=new egret.Sprite;this._gevm=new GridElementViewManage(t),t.x=(GameData.stageW-GameData.brickwidth*e)/2,this.gameViewGroup.addChild(t),this._gevm.addEventListener(GridElementViewManageEvent.TAP_GRIDELEMENT,this.tap_gridelement,this),this._gevm.addEventListener(GridElementViewManageEvent.ROTATE_END,this.rotate_end,this)},t.prototype.tap_selLevelButton=function(){var e=new MainViewEvent(MainViewEvent.TAP_SEL_LEVEL_BUTTON);this._dispatcher.dispatchEvent(e)},t.prototype.tap_replayButton=function(){var e=new MainViewEvent(MainViewEvent.TAP_REPLAY_BUTTON);this._dispatcher.dispatchEvent(e)},t.prototype.tap_propButton=function(){var e=new MainViewEvent(MainViewEvent.TAP_PROP_BUTTON);this._dispatcher.dispatchEvent(e)},t.prototype.tap_soundButton=function(e){var t=new MainViewEvent(MainViewEvent.TAP_SOUND_BUTTON);t.soundOn=!e.target.selected,this._dispatcher.dispatchEvent(t)},t.prototype.tap_gridelement=function(e){var t=e.xIndex,a=e.yIndex,n=GameData.elements[t][a].rot+90;n=n%360===0?0:n,GameData.elements[t][a].rot=n},t.prototype.rotate_end=function(){this.reLink()},t.prototype.setLevelNumImage=function(){var e=GameData.nowLevel<10?"0"+GameData.nowLevel:""+GameData.nowLevel;this.level_num1_Image.texture=RES.getRes(e[0]+"_png"),this.level_num2_Image.texture=RES.getRes(e[1]+"_png")},t.prototype.reLink=function(){this._gevm.unlightBulb();var e=LinkLogic.link();if(this._gevm.lightBulb(),e)if("guide"===this.currentState){this.enabled=!1;var t=new MainViewEvent(MainViewEvent.SKIP_GUIDE);this._dispatcher.dispatchEvent(t),this.removeChild(this.guideElement)}else{for(var a=new Date,n=(a.getTime()-this._startTime.getTime())/1e3%60,i=GameData.starConfig["l"+GameData.line+"c"+GameData.col],r=0,o=i.length;o>r;r++){var s=2;if(n<=i[r]){s=r;break}}this.enabled=!1;var l=GameData.getPropPartLine(GameData.nowLevel),h=GameData.getPropShowLine(GameData.nowLevel),p=l||h?3:3-s,t=new MainViewEvent(MainViewEvent.SUCCESS);t.starNum=p,this._dispatcher.dispatchEvent(t)}},t}(eui.Component);__reflect(MainView.prototype,"MainView");var PropView=function(e){function t(){var t=e.call(this)||this;return t.skinName=userSkins.PropViewSkin,t.init(),t}return __extends(t,e),t.prototype.partAdded=function(e,t){t===this.closeButton?this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_closeButton,this):t===this.partLineButton?(this.partLineButton.touchEnabled=!0,this.partLineButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_partLineButton,this)):t===this.showLineButton&&(this.showLineButton.touchEnabled=!0,this.showLineButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_showLineButton,this))},t.prototype.init=function(){this._dispatcher=new egret.EventDispatcher,this.hide()},Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!0,configurable:!0}),t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.tap_closeButton=function(){this.hide()},t.prototype.tap_partLineButton=function(){this.hide();var e=new PropViewEvent(PropViewEvent.TAP_PART_LINE_BUTTON);this._dispatcher.dispatchEvent(e)},t.prototype.tap_showLineButton=function(){this.hide();var e=new PropViewEvent(PropViewEvent.TAP_SHOW_LINE_BUTTON);this._dispatcher.dispatchEvent(e)},t}(eui.Component);__reflect(PropView.prototype,"PropView");var SuccessView=function(e){function t(){var t=e.call(this)||this;return t.skinName=userSkins.SuccessViewSkin,t.init(),t}return __extends(t,e),t.prototype.partAdded=function(e,t){t===this.nextlevel_btn?this.nextlevel_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_nextLevelBtn,this):t===this.moregame_btn?this.moregame_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_moregameBtn,this):t===this.share_btn&&this.share_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap_shareBtn,this)},t.prototype.init=function(){this.hide(),this._dispatcher=new egret.EventDispatcher},Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!0,configurable:!0}),t.prototype.show=function(e){this.starImage.texture=RES.getRes("star"+e+"_s_png"),this.visible=!0,this.showIt.play(1)},t.prototype.hide=function(){this.visible=!1},t.prototype.tap_nextLevelBtn=function(){var e=new SuccessViewEvent(SuccessViewEvent.TAP_NEXT_LEVEL_BUTTON);this._dispatcher.dispatchEvent(e),this.hide()},t.prototype.tap_moregameBtn=function(){},t.prototype.tap_shareBtn=function(){},t}(eui.Component);__reflect(SuccessView.prototype,"SuccessView");